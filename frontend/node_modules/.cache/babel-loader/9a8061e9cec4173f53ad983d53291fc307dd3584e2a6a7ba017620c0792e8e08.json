{"ast":null,"code":"import { computed, watch } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'CartPage',\n  setup() {\n    const store = useStore();\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const formatPrice = price => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    const getItemPrice = item => {\n      const unitPrice = item.service.discountedPrice || item.service.price;\n      return unitPrice * item.quantity;\n    };\n    const increaseQuantity = item => {\n      if (item.quantity < 10) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity + 1\n        });\n      }\n    };\n    const decreaseQuantity = item => {\n      if (item.quantity > 1) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity - 1\n        });\n      }\n    };\n    const updateQuantity = item => {\n      // Ensure quantity is within limits\n      let quantity = item.quantity;\n      if (quantity < 1) quantity = 1;\n      if (quantity > 10) quantity = 10;\n      store.dispatch('cart/updateQuantity', {\n        cartItemId: item.id,\n        quantity\n      });\n    };\n    const removeItem = itemId => {\n      store.dispatch('cart/removeFromCart', itemId);\n    };\n\n    // Watch for empty cart and set document title\n    watch(cartItems, items => {\n      document.title = items.length > 0 ? `Kundvagn (${items.length}) - Svensk Hälsovård` : 'Kundvagn - Svensk Hälsovård';\n    }, {\n      immediate: true\n    });\n    return {\n      cartItems,\n      cartTotal,\n      formatPrice,\n      getItemPrice,\n      increaseQuantity,\n      decreaseQuantity,\n      updateQuantity,\n      removeItem\n    };\n  }\n};","map":{"version":3,"names":["computed","watch","useStore","name","setup","store","cartItems","getters","cartTotal","formatPrice","price","Intl","NumberFormat","format","getItemPrice","item","unitPrice","service","discountedPrice","quantity","increaseQuantity","dispatch","cartItemId","id","decreaseQuantity","updateQuantity","removeItem","itemId","items","document","title","length","immediate"],"sources":["/home/dennis/medport/frontend/src/views/CartPage.vue"],"sourcesContent":["<template>\n  <div class=\"cart-page\">\n    <div class=\"container\">\n      <h1>Kundvagn</h1>\n      \n      <div v-if=\"cartItems.length === 0\" class=\"empty-cart\">\n        <div class=\"icon\">\n          <i class=\"ri-shopping-cart-2-line\"></i>\n        </div>\n        <h2>Din kundvagn är tom</h2>\n        <p>Du har inte lagt till några artiklar i din kundvagn än.</p>\n        <router-link to=\"/\" class=\"btn btn-primary\">\n          <i class=\"ri-arrow-left-line\"></i> Fortsätt handla\n        </router-link>\n      </div>\n      \n      <div v-else class=\"cart-content\">\n        <div class=\"cart-items\">\n          <h2>Artiklar</h2>\n          \n          <div v-for=\"item in cartItems\" :key=\"item.id\" class=\"cart-item\">\n            <div class=\"item-image\">\n              <img :src=\"item.service.image\" :alt=\"item.service.name\" />\n            </div>\n            \n            <div class=\"item-details\">\n              <h3>{{ item.service.name }}</h3>\n              <p class=\"purchase-type\">\n                <span class=\"badge\" :class=\"item.purchaseType === 'subscription' ? 'badge-primary' : 'badge-secondary'\">\n                  {{ item.purchaseType === 'subscription' ? 'Prenumeration' : 'Engångsköp' }}\n                </span>\n              </p>\n              <p v-if=\"item.purchaseType === 'subscription' && item.service.subscriptionInterval\" class=\"subscription-interval\">\n                {{ item.service.subscriptionInterval }}\n              </p>\n            </div>\n            \n            <div class=\"item-quantity\">\n              <div class=\"quantity-control\">\n                <button \n                  @click=\"decreaseQuantity(item)\" \n                  :disabled=\"item.quantity <= 1\"\n                  class=\"quantity-btn\"\n                  aria-label=\"Minska antal\"\n                >\n                  <i class=\"ri-subtract-line\"></i>\n                </button>\n                <input \n                  type=\"number\" \n                  v-model.number=\"item.quantity\" \n                  min=\"1\" \n                  max=\"10\"\n                  @change=\"updateQuantity(item)\"\n                  aria-label=\"Antal\"\n                />\n                <button \n                  @click=\"increaseQuantity(item)\"\n                  :disabled=\"item.quantity >= 10\"\n                  class=\"quantity-btn\"\n                  aria-label=\"Öka antal\"\n                >\n                  <i class=\"ri-add-line\"></i>\n                </button>\n              </div>\n            </div>\n            \n            <div class=\"item-price\">\n              <p class=\"price\">{{ formatPrice(getItemPrice(item)) }} kr</p>\n              <p v-if=\"item.quantity > 1\" class=\"unit-price\">\n                {{ formatPrice(item.service.discountedPrice || item.service.price) }} kr / st\n              </p>\n            </div>\n            \n            <div class=\"item-remove\">\n              <button @click=\"removeItem(item.id)\" class=\"remove-btn\" aria-label=\"Ta bort från kundvagnen\">\n                <i class=\"ri-delete-bin-line\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"cart-summary\">\n          <h2>Sammanfattning</h2>\n          \n          <div class=\"summary-content\">\n            <div class=\"summary-row\">\n              <span>Delsumma</span>\n              <span>{{ formatPrice(cartTotal) }} kr</span>\n            </div>\n            \n            <div class=\"summary-row\">\n              <span>Leverans</span>\n              <span>Ingår</span>\n            </div>\n            \n            <div class=\"summary-row total\">\n              <span>Totalt</span>\n              <span>{{ formatPrice(cartTotal) }} kr</span>\n            </div>\n            \n            <div class=\"summary-badges\">\n              <div class=\"summary-badge\">\n                <i class=\"ri-shield-check-line\"></i>\n                <span>Säker betalning</span>\n              </div>\n              <div class=\"summary-badge\">\n                <i class=\"ri-truck-line\"></i>\n                <span>Snabb leverans</span>\n              </div>\n            </div>\n            \n            <div class=\"summary-actions\">\n              <router-link to=\"/\" class=\"btn btn-outline-primary\">\n                <i class=\"ri-arrow-left-line\"></i> Fortsätt handla\n              </router-link>\n              <router-link to=\"/checkout\" class=\"btn btn-primary\">\n                <i class=\"ri-arrow-right-line\"></i> Till kassan\n              </router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nexport default {\n  name: 'CartPage',\n  setup() {\n    const store = useStore();\n    \n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    \n    const formatPrice = (price) => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    \n    const getItemPrice = (item) => {\n      const unitPrice = item.service.discountedPrice || item.service.price;\n      return unitPrice * item.quantity;\n    };\n    \n    const increaseQuantity = (item) => {\n      if (item.quantity < 10) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity + 1\n        });\n      }\n    };\n    \n    const decreaseQuantity = (item) => {\n      if (item.quantity > 1) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity - 1\n        });\n      }\n    };\n    \n    const updateQuantity = (item) => {\n      // Ensure quantity is within limits\n      let quantity = item.quantity;\n      if (quantity < 1) quantity = 1;\n      if (quantity > 10) quantity = 10;\n      \n      store.dispatch('cart/updateQuantity', {\n        cartItemId: item.id,\n        quantity\n      });\n    };\n    \n    const removeItem = (itemId) => {\n      store.dispatch('cart/removeFromCart', itemId);\n    };\n    \n    // Watch for empty cart and set document title\n    watch(cartItems, (items) => {\n      document.title = items.length > 0 \n        ? `Kundvagn (${items.length}) - Svensk Hälsovård` \n        : 'Kundvagn - Svensk Hälsovård';\n    }, { immediate: true });\n    \n    return {\n      cartItems,\n      cartTotal,\n      formatPrice,\n      getItemPrice,\n      increaseQuantity,\n      decreaseQuantity,\n      updateQuantity,\n      removeItem\n    };\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.cart-page {\n  padding: 3rem 0;\n  background-color: $background;\n  \n  h1 {\n    margin-bottom: 2rem;\n    color: $primary;\n    font-weight: 700;\n  }\n  \n  .empty-cart {\n    text-align: center;\n    padding: 4rem 0;\n    background-color: $light;\n    border-radius: $border-radius-lg;\n    box-shadow: $box-shadow;\n    margin-bottom: 2rem;\n    \n    .icon {\n      font-size: 5rem;\n      margin-bottom: 1.5rem;\n      color: #cbd5e0;\n      animation: float 3s ease-in-out infinite;\n      \n      @keyframes float {\n        0% { transform: translateY(0); }\n        50% { transform: translateY(-10px); }\n        100% { transform: translateY(0); }\n      }\n    }\n    \n    h2 {\n      margin-bottom: 1rem;\n      font-weight: 700;\n      color: $primary;\n    }\n    \n    p {\n      margin-bottom: 2rem;\n      color: #4a5568;\n      font-size: 1.1rem;\n    }\n    \n    .btn {\n      padding: 0.75rem 2rem;\n      font-weight: 600;\n      display: inline-flex;\n      align-items: center;\n      gap: 0.5rem;\n      box-shadow: $box-shadow;\n      \n      i {\n        font-size: 1.2rem;\n      }\n      \n      &:hover {\n        transform: translateY(-3px);\n        box-shadow: $box-shadow-hover;\n      }\n    }\n  }\n  \n  .cart-content {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n    \n    .cart-items {\n      flex: 0 0 100%;\n      max-width: 100%;\n      \n      @media (min-width: $breakpoint-lg) {\n        flex: 0 0 calc(65% - 1rem);\n        max-width: calc(65% - 1rem);\n      }\n      \n      h2 {\n        margin-bottom: 1.5rem;\n        color: $primary;\n        font-size: 1.5rem;\n        font-weight: 700;\n      }\n      \n      .cart-item {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        padding: 1.5rem;\n        margin-bottom: 1.5rem;\n        background-color: $light;\n        border-radius: $border-radius-lg;\n        box-shadow: $box-shadow;\n        transition: $transition-base;\n        \n        &:hover {\n          box-shadow: $box-shadow-hover;\n          transform: translateY(-3px);\n        }\n        \n        .item-image {\n          flex: 0 0 100px;\n          max-width: 100px;\n          margin-right: 1.5rem;\n          \n          img {\n            width: 100%;\n            height: 100px;\n            object-fit: cover;\n            border-radius: $border-radius;\n          }\n        }\n        \n        .item-details {\n          flex: 1;\n          min-width: 0;\n          padding-right: 1rem;\n          \n          h3 {\n            margin-bottom: 0.5rem;\n            font-size: 1.25rem;\n            font-weight: 700;\n            color: $dark;\n          }\n          \n          .purchase-type {\n            margin-bottom: 0.25rem;\n            \n            .badge {\n              padding: 0.35em 0.75em;\n              border-radius: 50rem;\n              font-size: 0.75rem;\n              font-weight: 600;\n            }\n          }\n          \n          .subscription-interval {\n            color: #64748b;\n            font-size: 0.9rem;\n            margin: 0;\n          }\n        }\n        \n        .item-quantity {\n          flex: 0 0 150px;\n          max-width: 150px;\n          \n          .quantity-control {\n            display: flex;\n            align-items: center;\n            border: 1px solid #e2e8f0;\n            border-radius: $border-radius;\n            overflow: hidden;\n            \n            .quantity-btn {\n              width: 36px;\n              height: 36px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              background-color: #f8f9fa;\n              border: none;\n              cursor: pointer;\n              transition: $transition-base;\n              \n              &:hover:not(:disabled) {\n                background-color: #e2e8f0;\n                color: $primary;\n              }\n              \n              &:disabled {\n                cursor: not-allowed;\n                opacity: 0.5;\n              }\n            }\n            \n            input {\n              width: 50px;\n              height: 36px;\n              border: none;\n              border-left: 1px solid #e2e8f0;\n              border-right: 1px solid #e2e8f0;\n              text-align: center;\n              font-weight: 600;\n              color: $dark;\n              -moz-appearance: textfield;\n              appearance: textfield;\n              \n              &::-webkit-outer-spin-button,\n              &::-webkit-inner-spin-button {\n                -webkit-appearance: none;\n                margin: 0;\n              }\n              \n              &:focus {\n                outline: none;\n              }\n            }\n          }\n        }\n        \n        .item-price {\n          flex: 0 0 120px;\n          max-width: 120px;\n          text-align: right;\n          \n          .price {\n            font-weight: 700;\n            margin-bottom: 0.25rem;\n            color: $primary;\n            font-size: 1.1rem;\n          }\n          \n          .unit-price {\n            font-size: 0.9rem;\n            color: #64748b;\n            margin: 0;\n          }\n        }\n        \n        .item-remove {\n          flex: 0 0 40px;\n          max-width: 40px;\n          text-align: center;\n          \n          .remove-btn {\n            background: none;\n            border: none;\n            color: #cbd5e0;\n            cursor: pointer;\n            font-size: 1.25rem;\n            transition: $transition-base;\n            width: 36px;\n            height: 36px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            \n            &:hover {\n              color: $danger;\n              background-color: rgba($danger, 0.1);\n              transform: scale(1.1);\n            }\n          }\n        }\n        \n        @media (max-width: $breakpoint-md) {\n          .item-image {\n            flex: 0 0 80px;\n            max-width: 80px;\n            margin-right: 1rem;\n            \n            img {\n              height: 80px;\n            }\n          }\n          \n          .item-details {\n            flex: 0 0 calc(100% - 80px - 1rem);\n            max-width: calc(100% - 80px - 1rem);\n            margin-bottom: 1rem;\n          }\n          \n          .item-quantity, .item-price {\n            flex: 0 0 calc(50% - 20px);\n            max-width: calc(50% - 20px);\n          }\n        }\n      }\n    }\n    \n    .cart-summary {\n      flex: 0 0 100%;\n      max-width: 100%;\n      align-self: flex-start;\n      \n      @media (min-width: $breakpoint-lg) {\n        flex: 0 0 calc(35% - 1rem);\n        max-width: calc(35% - 1rem);\n      }\n      \n      h2 {\n        margin-bottom: 1.5rem;\n        color: $primary;\n        font-size: 1.5rem;\n        font-weight: 700;\n      }\n      \n      .summary-content {\n        background-color: $light;\n        border-radius: $border-radius-lg;\n        box-shadow: $box-shadow;\n        padding: 1.75rem;\n        \n        .summary-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 0.75rem 0;\n          \n          &:not(:last-child) {\n            border-bottom: 1px solid #f1f5f9;\n          }\n          \n          &.total {\n            font-weight: 700;\n            font-size: 1.25rem;\n            margin-top: 0.5rem;\n            color: $primary;\n            border-top: 1px solid #e2e8f0;\n            border-bottom: none;\n            padding-top: 1rem;\n          }\n        }\n        \n        .summary-badges {\n          margin: 1.5rem 0;\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n          \n          .summary-badge {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            padding: 0.75rem;\n            background-color: $primary-lighter;\n            border-radius: $border-radius;\n            \n            i {\n              color: $primary;\n              font-size: 1.25rem;\n            }\n            \n            span {\n              color: #4a5568;\n              font-weight: 500;\n            }\n          }\n        }\n        \n        .summary-actions {\n          margin-top: 2rem;\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n          \n          .btn {\n            width: 100%;\n            padding: 0.875rem;\n            font-weight: 600;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 0.5rem;\n            box-shadow: $box-shadow;\n            \n            i {\n              font-size: 1.2rem;\n            }\n            \n            &:hover {\n              transform: translateY(-3px);\n              box-shadow: $box-shadow-hover;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>"],"mappings":"AA+HA,SAASA,QAAQ,EAAEC,KAAI,QAAS,KAAK;AACrC,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC,CAAC;IAExB,MAAMI,SAAQ,GAAIN,QAAQ,CAAC,MAAMK,KAAK,CAACE,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAMC,SAAQ,GAAIR,QAAQ,CAAC,MAAMK,KAAK,CAACE,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAEjE,MAAME,WAAU,GAAKC,KAAK,IAAK;MAC7B,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;IACrD,CAAC;IAED,MAAMI,YAAW,GAAKC,IAAI,IAAK;MAC7B,MAAMC,SAAQ,GAAID,IAAI,CAACE,OAAO,CAACC,eAAc,IAAKH,IAAI,CAACE,OAAO,CAACP,KAAK;MACpE,OAAOM,SAAQ,GAAID,IAAI,CAACI,QAAQ;IAClC,CAAC;IAED,MAAMC,gBAAe,GAAKL,IAAI,IAAK;MACjC,IAAIA,IAAI,CAACI,QAAO,GAAI,EAAE,EAAE;QACtBd,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAE;UACpCC,UAAU,EAAEP,IAAI,CAACQ,EAAE;UACnBJ,QAAQ,EAAEJ,IAAI,CAACI,QAAO,GAAI;QAC5B,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMK,gBAAe,GAAKT,IAAI,IAAK;MACjC,IAAIA,IAAI,CAACI,QAAO,GAAI,CAAC,EAAE;QACrBd,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAE;UACpCC,UAAU,EAAEP,IAAI,CAACQ,EAAE;UACnBJ,QAAQ,EAAEJ,IAAI,CAACI,QAAO,GAAI;QAC5B,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMM,cAAa,GAAKV,IAAI,IAAK;MAC/B;MACA,IAAII,QAAO,GAAIJ,IAAI,CAACI,QAAQ;MAC5B,IAAIA,QAAO,GAAI,CAAC,EAAEA,QAAO,GAAI,CAAC;MAC9B,IAAIA,QAAO,GAAI,EAAE,EAAEA,QAAO,GAAI,EAAE;MAEhCd,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAE;QACpCC,UAAU,EAAEP,IAAI,CAACQ,EAAE;QACnBJ;MACF,CAAC,CAAC;IACJ,CAAC;IAED,MAAMO,UAAS,GAAKC,MAAM,IAAK;MAC7BtB,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAEM,MAAM,CAAC;IAC/C,CAAC;;IAED;IACA1B,KAAK,CAACK,SAAS,EAAGsB,KAAK,IAAK;MAC1BC,QAAQ,CAACC,KAAI,GAAIF,KAAK,CAACG,MAAK,GAAI,IAC5B,aAAaH,KAAK,CAACG,MAAM,sBAAqB,GAC9C,6BAA6B;IACnC,CAAC,EAAE;MAAEC,SAAS,EAAE;IAAK,CAAC,CAAC;IAEvB,OAAO;MACL1B,SAAS;MACTE,SAAS;MACTC,WAAW;MACXK,YAAY;MACZM,gBAAgB;MAChBI,gBAAgB;MAChBC,cAAc;MACdC;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}