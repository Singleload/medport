{"ast":null,"code":"import { computed, watch } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'CartPage',\n  setup() {\n    const store = useStore();\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const formatPrice = price => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    const getItemPrice = item => {\n      const unitPrice = item.service.discountedPrice || item.service.price;\n      return unitPrice * item.quantity;\n    };\n    const increaseQuantity = item => {\n      if (item.quantity < 10) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity + 1\n        });\n      }\n    };\n    const decreaseQuantity = item => {\n      if (item.quantity > 1) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity - 1\n        });\n      }\n    };\n    const updateQuantity = item => {\n      // Ensure quantity is within limits\n      let quantity = item.quantity;\n      if (quantity < 1) quantity = 1;\n      if (quantity > 10) quantity = 10;\n      store.dispatch('cart/updateQuantity', {\n        cartItemId: item.id,\n        quantity\n      });\n    };\n    const removeItem = itemId => {\n      store.dispatch('cart/removeFromCart', itemId);\n    };\n\n    // Watch for empty cart and set document title\n    watch(cartItems, items => {\n      document.title = items.length > 0 ? `Kundvagn (${items.length}) - Svensk Hälsovård` : 'Kundvagn - Svensk Hälsovård';\n    }, {\n      immediate: true\n    });\n    return {\n      cartItems,\n      cartTotal,\n      formatPrice,\n      getItemPrice,\n      increaseQuantity,\n      decreaseQuantity,\n      updateQuantity,\n      removeItem\n    };\n  }\n};","map":{"version":3,"names":["computed","watch","useStore","name","setup","store","cartItems","getters","cartTotal","formatPrice","price","Intl","NumberFormat","format","getItemPrice","item","unitPrice","service","discountedPrice","quantity","increaseQuantity","dispatch","cartItemId","id","decreaseQuantity","updateQuantity","removeItem","itemId","items","document","title","length","immediate"],"sources":["/home/dennis/medport/frontend/src/views/CartPage.vue"],"sourcesContent":["<template>\n  <div class=\"cart-page\">\n    <div class=\"container\">\n      <h1>Kundvagn</h1>\n      \n      <div v-if=\"cartItems.length === 0\" class=\"empty-cart\">\n        <div class=\"icon\">\n          <i class=\"ri-shopping-cart-2-line\"></i>\n        </div>\n        <h2>Din kundvagn är tom</h2>\n        <p>Du har inte lagt till några artiklar i din kundvagn än.</p>\n        <router-link to=\"/\" class=\"btn btn-primary\">Fortsätt handla</router-link>\n      </div>\n      \n      <div v-else class=\"cart-content\">\n        <div class=\"cart-items\">\n          <h2>Artiklar</h2>\n          \n          <div v-for=\"item in cartItems\" :key=\"item.id\" class=\"cart-item\">\n            <div class=\"item-image\">\n              <img :src=\"item.service.image\" :alt=\"item.service.name\" />\n            </div>\n            \n            <div class=\"item-details\">\n              <h3>{{ item.service.name }}</h3>\n              <p class=\"purchase-type\">{{ item.purchaseType === 'subscription' ? 'Prenumeration' : 'Engångsköp' }}</p>\n              <p v-if=\"item.purchaseType === 'subscription' && item.service.subscriptionInterval\">\n                {{ item.service.subscriptionInterval }}\n              </p>\n            </div>\n            \n            <div class=\"item-quantity\">\n              <div class=\"quantity-control\">\n                <button \n                  @click=\"decreaseQuantity(item)\" \n                  :disabled=\"item.quantity <= 1\"\n                  class=\"quantity-btn\"\n                >\n                  <i class=\"ri-subtract-line\"></i>\n                </button>\n                <input \n                  type=\"number\" \n                  v-model.number=\"item.quantity\" \n                  min=\"1\" \n                  max=\"10\"\n                  @change=\"updateQuantity(item)\"\n                />\n                <button \n                  @click=\"increaseQuantity(item)\"\n                  :disabled=\"item.quantity >= 10\"\n                  class=\"quantity-btn\"\n                >\n                  <i class=\"ri-add-line\"></i>\n                </button>\n              </div>\n            </div>\n            \n            <div class=\"item-price\">\n              <p class=\"price\">{{ formatPrice(getItemPrice(item)) }} kr</p>\n              <p v-if=\"item.quantity > 1\" class=\"unit-price\">\n                {{ formatPrice(item.service.discountedPrice || item.service.price) }} kr / st\n              </p>\n            </div>\n            \n            <div class=\"item-remove\">\n              <button @click=\"removeItem(item.id)\" class=\"remove-btn\">\n                <i class=\"ri-delete-bin-line\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"cart-summary\">\n          <h2>Sammanfattning</h2>\n          \n          <div class=\"summary-content\">\n            <div class=\"summary-row\">\n              <span>Delsumma</span>\n              <span>{{ formatPrice(cartTotal) }} kr</span>\n            </div>\n            \n            <div class=\"summary-row\">\n              <span>Leverans</span>\n              <span>Ingår</span>\n            </div>\n            \n            <div class=\"summary-row total\">\n              <span>Totalt</span>\n              <span>{{ formatPrice(cartTotal) }} kr</span>\n            </div>\n            \n            <div class=\"summary-actions\">\n              <router-link to=\"/\" class=\"btn btn-secondary\">Fortsätt handla</router-link>\n              <router-link to=\"/checkout\" class=\"btn btn-primary\">Till kassan</router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nexport default {\n  name: 'CartPage',\n  setup() {\n    const store = useStore();\n    \n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    \n    const formatPrice = (price) => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    \n    const getItemPrice = (item) => {\n      const unitPrice = item.service.discountedPrice || item.service.price;\n      return unitPrice * item.quantity;\n    };\n    \n    const increaseQuantity = (item) => {\n      if (item.quantity < 10) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity + 1\n        });\n      }\n    };\n    \n    const decreaseQuantity = (item) => {\n      if (item.quantity > 1) {\n        store.dispatch('cart/updateQuantity', {\n          cartItemId: item.id,\n          quantity: item.quantity - 1\n        });\n      }\n    };\n    \n    const updateQuantity = (item) => {\n      // Ensure quantity is within limits\n      let quantity = item.quantity;\n      if (quantity < 1) quantity = 1;\n      if (quantity > 10) quantity = 10;\n      \n      store.dispatch('cart/updateQuantity', {\n        cartItemId: item.id,\n        quantity\n      });\n    };\n    \n    const removeItem = (itemId) => {\n      store.dispatch('cart/removeFromCart', itemId);\n    };\n    \n    // Watch for empty cart and set document title\n    watch(cartItems, (items) => {\n      document.title = items.length > 0 \n        ? `Kundvagn (${items.length}) - Svensk Hälsovård` \n        : 'Kundvagn - Svensk Hälsovård';\n    }, { immediate: true });\n    \n    return {\n      cartItems,\n      cartTotal,\n      formatPrice,\n      getItemPrice,\n      increaseQuantity,\n      decreaseQuantity,\n      updateQuantity,\n      removeItem\n    };\n  }\n};\n</script>"],"mappings":"AAuGA,SAASA,QAAQ,EAAEC,KAAI,QAAS,KAAK;AACrC,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC,CAAC;IAExB,MAAMI,SAAQ,GAAIN,QAAQ,CAAC,MAAMK,KAAK,CAACE,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAMC,SAAQ,GAAIR,QAAQ,CAAC,MAAMK,KAAK,CAACE,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAEjE,MAAME,WAAU,GAAKC,KAAK,IAAK;MAC7B,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;IACrD,CAAC;IAED,MAAMI,YAAW,GAAKC,IAAI,IAAK;MAC7B,MAAMC,SAAQ,GAAID,IAAI,CAACE,OAAO,CAACC,eAAc,IAAKH,IAAI,CAACE,OAAO,CAACP,KAAK;MACpE,OAAOM,SAAQ,GAAID,IAAI,CAACI,QAAQ;IAClC,CAAC;IAED,MAAMC,gBAAe,GAAKL,IAAI,IAAK;MACjC,IAAIA,IAAI,CAACI,QAAO,GAAI,EAAE,EAAE;QACtBd,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAE;UACpCC,UAAU,EAAEP,IAAI,CAACQ,EAAE;UACnBJ,QAAQ,EAAEJ,IAAI,CAACI,QAAO,GAAI;QAC5B,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMK,gBAAe,GAAKT,IAAI,IAAK;MACjC,IAAIA,IAAI,CAACI,QAAO,GAAI,CAAC,EAAE;QACrBd,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAE;UACpCC,UAAU,EAAEP,IAAI,CAACQ,EAAE;UACnBJ,QAAQ,EAAEJ,IAAI,CAACI,QAAO,GAAI;QAC5B,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMM,cAAa,GAAKV,IAAI,IAAK;MAC/B;MACA,IAAII,QAAO,GAAIJ,IAAI,CAACI,QAAQ;MAC5B,IAAIA,QAAO,GAAI,CAAC,EAAEA,QAAO,GAAI,CAAC;MAC9B,IAAIA,QAAO,GAAI,EAAE,EAAEA,QAAO,GAAI,EAAE;MAEhCd,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAE;QACpCC,UAAU,EAAEP,IAAI,CAACQ,EAAE;QACnBJ;MACF,CAAC,CAAC;IACJ,CAAC;IAED,MAAMO,UAAS,GAAKC,MAAM,IAAK;MAC7BtB,KAAK,CAACgB,QAAQ,CAAC,qBAAqB,EAAEM,MAAM,CAAC;IAC/C,CAAC;;IAED;IACA1B,KAAK,CAACK,SAAS,EAAGsB,KAAK,IAAK;MAC1BC,QAAQ,CAACC,KAAI,GAAIF,KAAK,CAACG,MAAK,GAAI,IAC5B,aAAaH,KAAK,CAACG,MAAM,sBAAqB,GAC9C,6BAA6B;IACnC,CAAC,EAAE;MAAEC,SAAS,EAAE;IAAK,CAAC,CAAC;IAEvB,OAAO;MACL1B,SAAS;MACTE,SAAS;MACTC,WAAW;MACXK,YAAY;MACZM,gBAAgB;MAChBI,gBAAgB;MAChBC,cAAc;MACdC;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}