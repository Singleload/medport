{"ast":null,"code":"import { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'AppNavbar',\n  setup() {\n    const store = useStore();\n    const showCartDropdown = ref(false);\n    const showMobileMenu = ref(false);\n    const scrolled = ref(false);\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartItemCount = computed(() => store.getters['cart/cartItemCount']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const toggleCart = e => {\n      e.stopPropagation();\n      showCartDropdown.value = !showCartDropdown.value;\n      if (showCartDropdown.value) {\n        showMobileMenu.value = false;\n      }\n    };\n    const toggleMobileMenu = () => {\n      showMobileMenu.value = !showMobileMenu.value;\n      if (showMobileMenu.value) {\n        showCartDropdown.value = false;\n      }\n    };\n    const closeCart = e => {\n      if (!e.target.closest('.cart-icon')) {\n        showCartDropdown.value = false;\n      }\n    };\n    const formatPrice = price => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    const handleScroll = () => {\n      if (window.scrollY > 50) {\n        scrolled.value = true;\n      } else {\n        scrolled.value = false;\n      }\n    };\n\n    // Close cart dropdown when clicking outside\n    onMounted(() => {\n      document.addEventListener('click', closeCart);\n      window.addEventListener('scroll', handleScroll);\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('click', closeCart);\n      window.removeEventListener('scroll', handleScroll);\n    });\n\n    // Close mobile menu when route changes\n    watch(() => store.state.route, () => {\n      showMobileMenu.value = false;\n    }, {\n      deep: true\n    });\n    return {\n      showCartDropdown,\n      showMobileMenu,\n      scrolled,\n      cartItems,\n      cartItemCount,\n      cartTotal,\n      toggleCart,\n      toggleMobileMenu,\n      formatPrice\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onBeforeUnmount","watch","useStore","name","setup","store","showCartDropdown","showMobileMenu","scrolled","cartItems","getters","cartItemCount","cartTotal","toggleCart","e","stopPropagation","value","toggleMobileMenu","closeCart","target","closest","formatPrice","price","Intl","NumberFormat","format","handleScroll","window","scrollY","document","addEventListener","removeEventListener","state","route","deep"],"sources":["/home/dennis/medport/frontend/src/components/common/AppNavbar.vue"],"sourcesContent":["<template>\n  <div>\n    <nav class=\"navbar\" :class=\"{ 'scrolled': scrolled }\">\n      <div class=\"container\">\n        <div class=\"navbar-content\">\n          <router-link to=\"/\" class=\"navbar-brand\">\n            <img src=\"@/assets/images/logo.png\" alt=\"Svensk Hälsovård\" />\n          </router-link>\n          \n          <div class=\"nav-links\">\n            <router-link to=\"/\" class=\"nav-link\">Hem</router-link>\n            <router-link to=\"/contact\" class=\"nav-link\">Kontakt</router-link>\n          </div>\n          \n          <div class=\"navbar-actions\">\n            <div class=\"cart-icon\" @click=\"toggleCart\">\n              <i class=\"ri-shopping-cart-2-line\"></i>\n              <span v-if=\"cartItemCount > 0\" class=\"badge\">{{ cartItemCount }}</span>\n              \n              <!-- Cart Dropdown -->\n              <div v-if=\"showCartDropdown\" class=\"cart-dropdown\">\n                <div v-if=\"cartItems.length === 0\" class=\"empty-cart\">\n                  <p>Din varukorg är tom</p>\n                </div>\n                <div v-else>\n                  <div class=\"cart-items\">\n                    <div v-for=\"item in cartItems\" :key=\"item.id\" class=\"cart-item\">\n                      <div class=\"item-info\">\n                        <h4>{{ item.service.name }}</h4>\n                        <p>\n                          {{ item.purchaseType === 'subscription' ? 'Prenumeration' : 'Engångsköp' }}\n                        </p>\n                      </div>\n                      <div class=\"item-price\">\n                        <p>{{ formatPrice(item.service.discountedPrice || item.service.price) }} kr</p>\n                        <p v-if=\"item.quantity > 1\">x{{ item.quantity }}</p>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"cart-footer\">\n                    <div class=\"cart-total\">\n                      <p>Totalt:</p>\n                      <p>{{ formatPrice(cartTotal) }} kr</p>\n                    </div>\n                    <div class=\"cart-actions\">\n                      <router-link to=\"/cart\" class=\"btn btn-outline-primary\" @click=\"showCartDropdown = false\">\n                        Visa varukorg\n                      </router-link>\n                      <router-link to=\"/checkout\" class=\"btn btn-primary\" @click=\"showCartDropdown = false\">\n                        Till kassan\n                      </router-link>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"user-icon\">\n              <i class=\"ri-user-3-line\"></i>\n            </div>\n\n            <div class=\"mobile-menu-toggle\" @click=\"toggleMobileMenu\">\n              <i class=\"ri-menu-line\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n\n    <!-- Mobile Menu -->\n    <div class=\"mobile-menu\" :class=\"{ 'active': showMobileMenu }\">\n      <div class=\"mobile-menu-content\">\n        <div class=\"mobile-menu-header\">\n          <img src=\"@/assets/images/logo.png\" alt=\"Svensk Hälsovård\" height=\"40\" />\n          <div class=\"mobile-menu-close\" @click=\"toggleMobileMenu\">\n            <i class=\"ri-close-line\"></i>\n          </div>\n        </div>\n        \n        <div class=\"mobile-menu-links\">\n          <router-link to=\"/\" class=\"nav-link\" @click=\"showMobileMenu = false\">Hem</router-link>\n          <router-link to=\"/contact\" class=\"nav-link\" @click=\"showMobileMenu = false\">Kontakt</router-link>\n        </div>\n        \n        <div class=\"mobile-menu-actions\">\n          <router-link to=\"/cart\" class=\"btn btn-outline-primary\" @click=\"showMobileMenu = false\">\n            <i class=\"ri-shopping-cart-2-line\"></i> Varukorg\n            <span v-if=\"cartItemCount > 0\" class=\"badge badge-primary\">{{ cartItemCount }}</span>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nexport default {\n  name: 'AppNavbar',\n  setup() {\n    const store = useStore();\n    const showCartDropdown = ref(false);\n    const showMobileMenu = ref(false);\n    const scrolled = ref(false);\n    \n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartItemCount = computed(() => store.getters['cart/cartItemCount']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    \n    const toggleCart = (e) => {\n      e.stopPropagation();\n      showCartDropdown.value = !showCartDropdown.value;\n      \n      if (showCartDropdown.value) {\n        showMobileMenu.value = false;\n      }\n    };\n    \n    const toggleMobileMenu = () => {\n      showMobileMenu.value = !showMobileMenu.value;\n      \n      if (showMobileMenu.value) {\n        showCartDropdown.value = false;\n      }\n    };\n    \n    const closeCart = (e) => {\n      if (!e.target.closest('.cart-icon')) {\n        showCartDropdown.value = false;\n      }\n    };\n    \n    const formatPrice = (price) => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    \n    const handleScroll = () => {\n      if (window.scrollY > 50) {\n        scrolled.value = true;\n      } else {\n        scrolled.value = false;\n      }\n    };\n    \n    // Close cart dropdown when clicking outside\n    onMounted(() => {\n      document.addEventListener('click', closeCart);\n      window.addEventListener('scroll', handleScroll);\n    });\n    \n    onBeforeUnmount(() => {\n      document.removeEventListener('click', closeCart);\n      window.removeEventListener('scroll', handleScroll);\n    });\n    \n    // Close mobile menu when route changes\n    watch(() => store.state.route, () => {\n      showMobileMenu.value = false;\n    }, { deep: true });\n    \n    return {\n      showCartDropdown,\n      showMobileMenu,\n      scrolled,\n      cartItems,\n      cartItemCount,\n      cartTotal,\n      toggleCart,\n      toggleMobileMenu,\n      formatPrice\n    };\n  }\n};\n</script>"],"mappings":"AAgGA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,eAAe,EAAEC,KAAI,QAAS,KAAK;AACtE,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIH,QAAQ,CAAC,CAAC;IACxB,MAAMI,gBAAe,GAAIT,GAAG,CAAC,KAAK,CAAC;IACnC,MAAMU,cAAa,GAAIV,GAAG,CAAC,KAAK,CAAC;IACjC,MAAMW,QAAO,GAAIX,GAAG,CAAC,KAAK,CAAC;IAE3B,MAAMY,SAAQ,GAAIX,QAAQ,CAAC,MAAMO,KAAK,CAACK,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAMC,aAAY,GAAIb,QAAQ,CAAC,MAAMO,KAAK,CAACK,OAAO,CAAC,oBAAoB,CAAC,CAAC;IACzE,MAAME,SAAQ,GAAId,QAAQ,CAAC,MAAMO,KAAK,CAACK,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAEjE,MAAMG,UAAS,GAAKC,CAAC,IAAK;MACxBA,CAAC,CAACC,eAAe,CAAC,CAAC;MACnBT,gBAAgB,CAACU,KAAI,GAAI,CAACV,gBAAgB,CAACU,KAAK;MAEhD,IAAIV,gBAAgB,CAACU,KAAK,EAAE;QAC1BT,cAAc,CAACS,KAAI,GAAI,KAAK;MAC9B;IACF,CAAC;IAED,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC7BV,cAAc,CAACS,KAAI,GAAI,CAACT,cAAc,CAACS,KAAK;MAE5C,IAAIT,cAAc,CAACS,KAAK,EAAE;QACxBV,gBAAgB,CAACU,KAAI,GAAI,KAAK;MAChC;IACF,CAAC;IAED,MAAME,SAAQ,GAAKJ,CAAC,IAAK;MACvB,IAAI,CAACA,CAAC,CAACK,MAAM,CAACC,OAAO,CAAC,YAAY,CAAC,EAAE;QACnCd,gBAAgB,CAACU,KAAI,GAAI,KAAK;MAChC;IACF,CAAC;IAED,MAAMK,WAAU,GAAKC,KAAK,IAAK;MAC7B,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;IACrD,CAAC;IAED,MAAMI,YAAW,GAAIA,CAAA,KAAM;MACzB,IAAIC,MAAM,CAACC,OAAM,GAAI,EAAE,EAAE;QACvBpB,QAAQ,CAACQ,KAAI,GAAI,IAAI;MACvB,OAAO;QACLR,QAAQ,CAACQ,KAAI,GAAI,KAAK;MACxB;IACF,CAAC;;IAED;IACAjB,SAAS,CAAC,MAAM;MACd8B,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEZ,SAAS,CAAC;MAC7CS,MAAM,CAACG,gBAAgB,CAAC,QAAQ,EAAEJ,YAAY,CAAC;IACjD,CAAC,CAAC;IAEF1B,eAAe,CAAC,MAAM;MACpB6B,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEb,SAAS,CAAC;MAChDS,MAAM,CAACI,mBAAmB,CAAC,QAAQ,EAAEL,YAAY,CAAC;IACpD,CAAC,CAAC;;IAEF;IACAzB,KAAK,CAAC,MAAMI,KAAK,CAAC2B,KAAK,CAACC,KAAK,EAAE,MAAM;MACnC1B,cAAc,CAACS,KAAI,GAAI,KAAK;IAC9B,CAAC,EAAE;MAAEkB,IAAI,EAAE;IAAK,CAAC,CAAC;IAElB,OAAO;MACL5B,gBAAgB;MAChBC,cAAc;MACdC,QAAQ;MACRC,SAAS;MACTE,aAAa;MACbC,SAAS;MACTC,UAAU;MACVI,gBAAgB;MAChBI;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}