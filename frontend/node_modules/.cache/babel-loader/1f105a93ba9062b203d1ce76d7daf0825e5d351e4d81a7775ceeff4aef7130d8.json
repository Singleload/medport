{"ast":null,"code":"import { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRoute } from 'vue-router';\nexport default {\n  name: 'AppNavbar',\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const showCartDropdown = ref(false);\n    const showMobileMenu = ref(false);\n    const scrolled = ref(false);\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartItemCount = computed(() => store.getters['cart/cartItemCount']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const toggleCart = e => {\n      e.stopPropagation();\n      showCartDropdown.value = !showCartDropdown.value;\n      if (showCartDropdown.value) {\n        showMobileMenu.value = false;\n      }\n    };\n    const closeCartDropdown = () => {\n      showCartDropdown.value = false;\n    };\n    const toggleMobileMenu = () => {\n      showMobileMenu.value = !showMobileMenu.value;\n      if (showMobileMenu.value) {\n        showCartDropdown.value = false;\n      }\n    };\n    const closeCart = e => {\n      if (!e.target.closest('.cart-icon')) {\n        showCartDropdown.value = false;\n      }\n    };\n    const formatPrice = price => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    const handleScroll = () => {\n      if (window.scrollY > 50) {\n        scrolled.value = true;\n      } else {\n        scrolled.value = false;\n      }\n    };\n\n    // Close cart dropdown when clicking outside\n    onMounted(() => {\n      document.addEventListener('click', closeCart);\n      window.addEventListener('scroll', handleScroll);\n      handleScroll(); // Check initial scroll position\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('click', closeCart);\n      window.removeEventListener('scroll', handleScroll);\n    });\n\n    // Close mobile menu and cart dropdown when route changes\n    watch(() => route.path, () => {\n      showMobileMenu.value = false;\n      showCartDropdown.value = false;\n    });\n    return {\n      showCartDropdown,\n      showMobileMenu,\n      scrolled,\n      cartItems,\n      cartItemCount,\n      cartTotal,\n      toggleCart,\n      closeCartDropdown,\n      toggleMobileMenu,\n      formatPrice\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onBeforeUnmount","watch","useStore","useRoute","name","setup","store","route","showCartDropdown","showMobileMenu","scrolled","cartItems","getters","cartItemCount","cartTotal","toggleCart","e","stopPropagation","value","closeCartDropdown","toggleMobileMenu","closeCart","target","closest","formatPrice","price","Intl","NumberFormat","format","handleScroll","window","scrollY","document","addEventListener","removeEventListener","path"],"sources":["/home/dennis/medport/frontend/src/components/common/AppNavbar.vue"],"sourcesContent":["<template>\n  <div>\n    <nav class=\"navbar\" :class=\"{ 'scrolled': scrolled }\">\n      <div class=\"container\">\n        <div class=\"navbar-content\">\n          <router-link to=\"/\" class=\"navbar-brand\">\n            <img src=\"@/assets/images/logo.png\" alt=\"Svensk Hälsovård\" />\n          </router-link>\n          \n          <div class=\"nav-links\">\n            <router-link to=\"/\" class=\"nav-link\">Hem</router-link>\n            <router-link to=\"/#services\" class=\"nav-link\">Tjänster</router-link>\n            <router-link to=\"/contact\" class=\"nav-link\">Kontakt</router-link>\n          </div>\n          \n          <div class=\"navbar-actions\">\n            <div class=\"cart-icon\" @click=\"toggleCart\">\n              <i class=\"ri-shopping-cart-2-line\"></i>\n              <span v-if=\"cartItemCount > 0\" class=\"badge\">{{ cartItemCount }}</span>\n              \n              <!-- Cart Dropdown -->\n              <div v-if=\"showCartDropdown\" class=\"cart-dropdown\">\n                <div v-if=\"cartItems.length === 0\" class=\"empty-cart\">\n                  <i class=\"ri-shopping-cart-line empty-cart-icon\"></i>\n                  <p>Din varukorg är tom</p>\n                </div>\n                <div v-else>\n                  <div class=\"cart-items\">\n                    <div v-for=\"item in cartItems\" :key=\"item.id\" class=\"cart-item\">\n                      <div class=\"item-info\">\n                        <h4>{{ item.service.name }}</h4>\n                        <p>\n                          {{ item.purchaseType === 'subscription' ? 'Prenumeration' : 'Engångsköp' }}\n                        </p>\n                      </div>\n                      <div class=\"item-price\">\n                        <p>{{ formatPrice(item.service.discountedPrice || item.service.price) }} kr</p>\n                        <p v-if=\"item.quantity > 1\">x{{ item.quantity }}</p>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"cart-footer\">\n                    <div class=\"cart-total\">\n                      <p>Totalt:</p>\n                      <p>{{ formatPrice(cartTotal) }} kr</p>\n                    </div>\n                    <div class=\"cart-actions\">\n                      <router-link to=\"/cart\" class=\"btn btn-outline-primary\" @click=\"closeCartDropdown\">\n                        <i class=\"ri-shopping-cart-line\"></i> Visa varukorg\n                      </router-link>\n                      <router-link to=\"/checkout\" class=\"btn btn-primary\" @click=\"closeCartDropdown\">\n                        <i class=\"ri-arrow-right-line\"></i> Till kassan\n                      </router-link>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"user-icon\">\n              <i class=\"ri-user-3-line\"></i>\n            </div>\n\n            <div class=\"mobile-menu-toggle\" @click=\"toggleMobileMenu\">\n              <i class=\"ri-menu-line\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n\n    <!-- Mobile Menu -->\n    <div class=\"mobile-menu\" :class=\"{ 'active': showMobileMenu }\">\n      <div class=\"mobile-menu-content\">\n        <div class=\"mobile-menu-header\">\n          <img src=\"@/assets/images/logo.png\" alt=\"Svensk Hälsovård\" height=\"40\" />\n          <div class=\"mobile-menu-close\" @click=\"toggleMobileMenu\">\n            <i class=\"ri-close-line\"></i>\n          </div>\n        </div>\n        \n        <div class=\"mobile-menu-links\">\n          <router-link to=\"/\" class=\"nav-link\" @click=\"showMobileMenu = false\">\n            <i class=\"ri-home-line\"></i> Hem\n          </router-link>\n          <router-link to=\"/#services\" class=\"nav-link\" @click=\"showMobileMenu = false\">\n            <i class=\"ri-heart-pulse-line\"></i> Tjänster\n          </router-link>\n          <router-link to=\"/contact\" class=\"nav-link\" @click=\"showMobileMenu = false\">\n            <i class=\"ri-customer-service-line\"></i> Kontakt\n          </router-link>\n        </div>\n        \n        <div class=\"mobile-menu-actions\">\n          <router-link to=\"/cart\" class=\"btn btn-outline-primary\" @click=\"showMobileMenu = false\">\n            <i class=\"ri-shopping-cart-2-line\"></i> Varukorg\n            <span v-if=\"cartItemCount > 0\" class=\"badge badge-primary\">{{ cartItemCount }}</span>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRoute } from 'vue-router';\n\nexport default {\n  name: 'AppNavbar',\n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const showCartDropdown = ref(false);\n    const showMobileMenu = ref(false);\n    const scrolled = ref(false);\n    \n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartItemCount = computed(() => store.getters['cart/cartItemCount']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    \n    const toggleCart = (e) => {\n      e.stopPropagation();\n      showCartDropdown.value = !showCartDropdown.value;\n      \n      if (showCartDropdown.value) {\n        showMobileMenu.value = false;\n      }\n    };\n    \n    const closeCartDropdown = () => {\n      showCartDropdown.value = false;\n    };\n    \n    const toggleMobileMenu = () => {\n      showMobileMenu.value = !showMobileMenu.value;\n      \n      if (showMobileMenu.value) {\n        showCartDropdown.value = false;\n      }\n    };\n    \n    const closeCart = (e) => {\n      if (!e.target.closest('.cart-icon')) {\n        showCartDropdown.value = false;\n      }\n    };\n    \n    const formatPrice = (price) => {\n      return new Intl.NumberFormat('sv-SE').format(price);\n    };\n    \n    const handleScroll = () => {\n      if (window.scrollY > 50) {\n        scrolled.value = true;\n      } else {\n        scrolled.value = false;\n      }\n    };\n    \n    // Close cart dropdown when clicking outside\n    onMounted(() => {\n      document.addEventListener('click', closeCart);\n      window.addEventListener('scroll', handleScroll);\n      handleScroll(); // Check initial scroll position\n    });\n    \n    onBeforeUnmount(() => {\n      document.removeEventListener('click', closeCart);\n      window.removeEventListener('scroll', handleScroll);\n    });\n    \n    // Close mobile menu and cart dropdown when route changes\n    watch(() => route.path, () => {\n      showMobileMenu.value = false;\n      showCartDropdown.value = false;\n    });\n    \n    return {\n      showCartDropdown,\n      showMobileMenu,\n      scrolled,\n      cartItems,\n      cartItemCount,\n      cartTotal,\n      toggleCart,\n      closeCartDropdown,\n      toggleMobileMenu,\n      formatPrice\n    };\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.navbar {\n  background-color: rgba($light, 0.98);\n  backdrop-filter: blur(10px);\n  box-shadow: $box-shadow-sm;\n  padding: 1rem 0;\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  transition: $transition-base;\n  \n  &.scrolled {\n    padding: 0.75rem 0;\n    box-shadow: $box-shadow;\n  }\n  \n  .navbar-content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  \n  .navbar-brand {\n    display: flex;\n    align-items: center;\n    \n    img {\n      height: 45px;\n      transition: $transition-base;\n    }\n  }\n  \n  .nav-links {\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    \n    @media (max-width: $breakpoint-md) {\n      display: none;\n    }\n    \n    .nav-link {\n      color: $dark;\n      font-weight: 500;\n      position: relative;\n      padding: 0.5rem 0;\n      \n      &::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 0;\n        height: 2px;\n        background-color: $primary;\n        transition: $transition-base;\n      }\n      \n      &:hover, &.router-link-active {\n        color: $primary;\n        \n        &::after {\n          width: 100%;\n        }\n      }\n    }\n  }\n  \n  .navbar-actions {\n    display: flex;\n    align-items: center;\n    gap: 1.5rem;\n    \n    .cart-icon, .user-icon {\n      position: relative;\n      font-size: 1.5rem;\n      cursor: pointer;\n      color: $dark;\n      transition: $transition-base;\n      \n      &:hover {\n        color: $primary;\n      }\n      \n      .badge {\n        position: absolute;\n        top: -8px;\n        right: -8px;\n        background-color: $primary;\n        color: white;\n        border-radius: 50%;\n        width: 22px;\n        height: 22px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 0.7rem;\n        font-weight: 700;\n        box-shadow: 0 2px 5px rgba($dark, 0.2);\n      }\n    }\n    \n    .cart-dropdown {\n      position: absolute;\n      top: calc(100% + 0.75rem);\n      right: -1rem;\n      width: 350px;\n      background-color: white;\n      border-radius: $border-radius-lg;\n      box-shadow: $box-shadow;\n      padding: 1.5rem;\n      margin-top: 0.5rem;\n      z-index: 1000;\n      transform-origin: top right;\n      animation: dropdown-fade 0.2s ease;\n      \n      @keyframes dropdown-fade {\n        from {\n          opacity: 0;\n          transform: translateY(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      .empty-cart {\n        text-align: center;\n        padding: 1.5rem 0;\n        \n        p {\n          color: #64748b;\n          margin-bottom: 0;\n        }\n      }\n      \n      .cart-items {\n        max-height: 300px;\n        overflow-y: auto;\n        margin-bottom: 1.5rem;\n        \n        &::-webkit-scrollbar {\n          width: 6px;\n        }\n        \n        &::-webkit-scrollbar-track {\n          background: #f1f1f1;\n          border-radius: 10px;\n        }\n        \n        &::-webkit-scrollbar-thumb {\n          background: #cdcdcd;\n          border-radius: 10px;\n        }\n        \n        .cart-item {\n          display: flex;\n          align-items: center;\n          padding: 0.75rem 0;\n          border-bottom: 1px solid #f1f5f9;\n          \n          &:last-child {\n            border-bottom: none;\n          }\n          \n          .item-info {\n            flex: 1;\n            min-width: 0;\n            \n            h4 {\n              font-size: 0.95rem;\n              margin-bottom: 0.25rem;\n              font-weight: 600;\n            }\n            \n            p {\n              margin: 0;\n              color: #64748b;\n              font-size: 0.85rem;\n            }\n          }\n          \n          .item-price {\n            text-align: right;\n            font-weight: 600;\n            white-space: nowrap;\n            margin-left: 1rem;\n            \n            p {\n              margin: 0;\n              font-size: 0.95rem;\n              \n              &:last-child {\n                font-size: 0.8rem;\n                color: #64748b;\n                font-weight: normal;\n              }\n            }\n          }\n        }\n      }\n      \n      .cart-footer {\n        .cart-total {\n          display: flex;\n          justify-content: space-between;\n          font-weight: 700;\n          margin-bottom: 1.5rem;\n          padding-top: 0.75rem;\n          border-top: 1px solid #e2e8f0;\n          font-size: 1.1rem;\n        }\n        \n        .cart-actions {\n          display: flex;\n          gap: 0.75rem;\n          \n          .btn {\n            flex: 1;\n            font-size: 0.9rem;\n            padding: 0.75rem 1rem;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 0.5rem;\n            \n            i {\n              font-size: 1.1rem;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .mobile-menu-toggle {\n    display: none;\n    font-size: 1.75rem;\n    color: $dark;\n    cursor: pointer;\n    transition: $transition-base;\n    \n    @media (max-width: $breakpoint-md) {\n      display: block;\n    }\n    \n    &:hover {\n      color: $primary;\n    }\n  }\n}\n\n.mobile-menu {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba($dark, 0.5);\n  backdrop-filter: blur(5px);\n  z-index: 1001;\n  opacity: 0;\n  visibility: hidden;\n  transition: $transition-base;\n  \n  &.active {\n    opacity: 1;\n    visibility: visible;\n    \n    .mobile-menu-content {\n      transform: translateX(0);\n    }\n  }\n  \n  .mobile-menu-content {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 300px;\n    height: 100%;\n    background-color: $light;\n    padding: 2rem;\n    overflow-y: auto;\n    transform: translateX(100%);\n    transition: transform 0.3s ease-in-out;\n    \n    .mobile-menu-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 2rem;\n      \n      .mobile-menu-close {\n        font-size: 1.5rem;\n        color: $dark;\n        cursor: pointer;\n        transition: $transition-base;\n        \n        &:hover {\n          color: $primary;\n        }\n      }\n    }\n    \n    .mobile-menu-links {\n      margin-bottom: 2rem;\n      \n      a {\n        display: block;\n        padding: 0.75rem 0;\n        font-weight: 500;\n        border-bottom: 1px solid #e2e8f0;\n        transition: $transition-base;\n        \n        &:hover, &.router-link-active {\n          color: $primary;\n          padding-left: 0.5rem;\n        }\n      }\n    }\n    \n    .mobile-menu-actions {\n      display: flex;\n      flex-direction: column;\n      gap: 1rem;\n    }\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}